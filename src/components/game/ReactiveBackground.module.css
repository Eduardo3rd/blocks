/* =============================================================================
   REACTIVE BACKGROUND - Project Synesthesia
   Dynamic, state-responsive cosmic background
   ============================================================================= */

.background {
  position: fixed;
  inset: 0;
  overflow: hidden;
  z-index: -1;
  
  /* Base cosmic gradient */
  background: radial-gradient(
    ellipse at 50% 50%,
    rgba(20, 30, 60, 1) 0%,
    rgba(10, 15, 35, 1) 50%,
    rgba(5, 5, 15, 1) 100%
  );
  
  /* CSS variables for reactivity */
  --level-intensity: 0;
  --effect-intensity: 1;
  
  transition: filter 0.5s ease;
}

/* =============================================================================
   Nebula Layers - Slow, drifting cosmic clouds
   ============================================================================= */

.nebula1,
.nebula2,
.nebula3 {
  position: absolute;
  inset: -50%;
  width: 200%;
  height: 200%;
  pointer-events: none;
  opacity: calc(0.3 + var(--level-intensity) * 0.2);
  transition: opacity 2s ease;
}

.nebula1 {
  background: radial-gradient(
    ellipse at 30% 20%,
    rgba(120, 40, 180, 0.4) 0%,
    transparent 50%
  );
  animation: drift1 60s ease-in-out infinite;
}

.nebula2 {
  background: radial-gradient(
    ellipse at 70% 60%,
    rgba(40, 100, 200, 0.35) 0%,
    transparent 45%
  );
  animation: drift2 45s ease-in-out infinite reverse;
}

.nebula3 {
  background: radial-gradient(
    ellipse at 50% 80%,
    rgba(200, 60, 120, 0.25) 0%,
    transparent 40%
  );
  animation: drift3 55s ease-in-out infinite;
}

@keyframes drift1 {
  0%, 100% {
    transform: translate(0, 0) scale(1);
  }
  33% {
    transform: translate(5%, 3%) scale(1.05);
  }
  66% {
    transform: translate(-3%, 5%) scale(0.98);
  }
}

@keyframes drift2 {
  0%, 100% {
    transform: translate(0, 0) rotate(0deg);
  }
  50% {
    transform: translate(-4%, 2%) rotate(5deg);
  }
}

@keyframes drift3 {
  0%, 100% {
    transform: translate(0, 0) scale(1);
  }
  50% {
    transform: translate(3%, -4%) scale(1.08);
  }
}

/* =============================================================================
   Star Field Layers
   ============================================================================= */

.stars1,
.stars2 {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.stars1 {
  background-image: 
    radial-gradient(circle at 15% 25%, rgba(255, 255, 255, 0.9) 0%, transparent 0.4%),
    radial-gradient(circle at 85% 15%, rgba(255, 255, 255, 0.7) 0%, transparent 0.3%),
    radial-gradient(circle at 45% 85%, rgba(255, 255, 255, 0.8) 0%, transparent 0.35%),
    radial-gradient(circle at 75% 65%, rgba(200, 220, 255, 0.6) 0%, transparent 0.25%),
    radial-gradient(circle at 25% 55%, rgba(255, 220, 180, 0.5) 0%, transparent 0.25%),
    radial-gradient(circle at 60% 35%, rgba(255, 255, 255, 0.6) 0%, transparent 0.2%),
    radial-gradient(circle at 90% 80%, rgba(255, 255, 255, 0.5) 0%, transparent 0.2%),
    radial-gradient(circle at 10% 70%, rgba(255, 255, 255, 0.4) 0%, transparent 0.2%);
  animation: twinkle1 8s ease-in-out infinite;
}

.stars2 {
  background-image: 
    radial-gradient(circle at 35% 15%, rgba(255, 255, 255, 0.5) 0%, transparent 0.15%),
    radial-gradient(circle at 65% 45%, rgba(255, 255, 255, 0.4) 0%, transparent 0.12%),
    radial-gradient(circle at 20% 75%, rgba(255, 255, 255, 0.45) 0%, transparent 0.14%),
    radial-gradient(circle at 80% 30%, rgba(255, 255, 255, 0.35) 0%, transparent 0.1%),
    radial-gradient(circle at 50% 90%, rgba(255, 255, 255, 0.4) 0%, transparent 0.13%),
    radial-gradient(circle at 5% 40%, rgba(255, 255, 255, 0.3) 0%, transparent 0.1%);
  animation: twinkle2 6s ease-in-out infinite;
  animation-delay: -3s;
}

@keyframes twinkle1 {
  0%, 100% {
    opacity: 0.7;
  }
  50% {
    opacity: 1;
  }
}

@keyframes twinkle2 {
  0%, 100% {
    opacity: 0.5;
  }
  50% {
    opacity: 0.8;
  }
}

/* =============================================================================
   Line Clear Pulse Effect
   ============================================================================= */

.pulseOverlay {
  position: absolute;
  inset: 0;
  background: radial-gradient(
    circle at 50% 50%,
    rgba(100, 180, 255, 0) 0%,
    rgba(100, 180, 255, 0) 100%
  );
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.1s ease;
}

.pulse .pulseOverlay {
  background: radial-gradient(
    circle at 50% 50%,
    rgba(100, 200, 255, 0.3) 0%,
    rgba(100, 200, 255, 0) 70%
  );
  opacity: 1;
  animation: pulseFlash 0.3s ease-out;
}

@keyframes pulseFlash {
  0% {
    opacity: 1;
    transform: scale(0.8);
  }
  100% {
    opacity: 0;
    transform: scale(1.2);
  }
}

/* =============================================================================
   Zone Mode - Desaturated, Time-Stop Effect
   ============================================================================= */

.zoneOverlay {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.3);
  pointer-events: none;
  animation: zoneIn 0.5s ease-out;
}

@keyframes zoneIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.zoneMode {
  filter: saturate(0.3) brightness(0.8);
}

.zoneMode .nebula1,
.zoneMode .nebula2,
.zoneMode .nebula3 {
  animation-duration: 120s;  /* Slow down nebula drift */
}

.zoneMode .stars1,
.zoneMode .stars2 {
  animation-duration: 16s;  /* Slow down twinkle */
}

/* =============================================================================
   Paused State
   ============================================================================= */

.paused {
  filter: brightness(0.4) blur(2px);
}

.paused .nebula1,
.paused .nebula2,
.paused .nebula3 {
  animation-play-state: paused;
}

/* =============================================================================
   Level Intensity Effects
   Higher levels = more vibrant, faster nebula movement
   ============================================================================= */

.background:not(.zoneMode):not(.paused) .nebula1 {
  animation-duration: calc(60s - var(--level-intensity) * 30s);
}

.background:not(.zoneMode):not(.paused) .nebula2 {
  animation-duration: calc(45s - var(--level-intensity) * 20s);
}

.background:not(.zoneMode):not(.paused) .nebula3 {
  animation-duration: calc(55s - var(--level-intensity) * 25s);
}

/* High level glow */
.background:not(.zoneMode):not(.paused)::after {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(
    ellipse at 50% 50%,
    rgba(100, 150, 255, calc(var(--level-intensity) * 0.1)) 0%,
    transparent 70%
  );
  pointer-events: none;
  animation: levelGlow 2s ease-in-out infinite;
}

@keyframes levelGlow {
  0%, 100% {
    opacity: 0.5;
  }
  50% {
    opacity: 1;
  }
}
